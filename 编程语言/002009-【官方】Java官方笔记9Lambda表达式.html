

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>【官方】Java官方笔记9Lambda表达式 &mdash; 测试开发体系 latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="【官方】Java官方笔记10注解" href="002010-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B010%E6%B3%A8%E8%A7%A3.html" />
    <link rel="prev" title="【官方】Java官方笔记8泛型" href="002008-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E6%B3%9B%E5%9E%8B.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 测试开发体系
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../%E5%85%B3%E4%BA%8E%E6%9C%AC%E4%B9%A6.html">关于本书</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.html">编程语言</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="000001-%E3%80%90%E5%85%A5%E9%97%A8%E3%80%91%E6%B5%8B%E8%AF%95%E4%BA%BA%E5%91%98%E5%AD%A6Java%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html">【入门】测试人员学Java入门指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="001001-%E3%80%90%E8%BF%9B%E9%98%B6%E3%80%91Java%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E7%B2%BE%E5%8D%8E%E7%AC%94%E8%AE%B0.html">【进阶】Java高级编程精华笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="001002-%E3%80%90%E8%BF%9B%E9%98%B6%E3%80%91%E5%88%B7%E5%AE%8C3%E4%B8%AAJava%E6%95%99%E7%A8%8B%E5%90%8E%E4%B8%8D%E5%86%8D%E7%8A%B9%E8%B1%AB.html">【进阶】刷完3个Java教程后不再犹豫</a></li>
<li class="toctree-l2"><a class="reference internal" href="002001-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B01%E7%BC%96%E5%86%99%E8%BF%90%E8%A1%8CJava%E7%A8%8B%E5%BA%8F.html">【官方】Java官方笔记1编写运行Java程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="002002-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B02%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html">【官方】Java官方笔记2面向对象编程基本概念</a></li>
<li class="toctree-l2"><a class="reference internal" href="002003-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B03Java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80.html">【官方】Java官方笔记3Java语言基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="002004-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B04%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1.html">【官方】Java官方笔记4类和对象</a></li>
<li class="toctree-l2"><a class="reference internal" href="002005-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B05%E6%95%B0%E5%AD%97%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2.html">【官方】Java官方笔记5数字和字符串</a></li>
<li class="toctree-l2"><a class="reference internal" href="002006-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B06%E7%BB%A7%E6%89%BF.html">【官方】Java官方笔记6继承</a></li>
<li class="toctree-l2"><a class="reference internal" href="002007-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B07%E6%8E%A5%E5%8F%A3.html">【官方】Java官方笔记7接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="002008-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E6%B3%9B%E5%9E%8B.html">【官方】Java官方笔记8泛型</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">【官方】Java官方笔记9Lambda表达式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lambda-expression">Lambda Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lambda">使用Lambda</a></li>
<li class="toctree-l3"><a class="reference internal" href="#method-references">Method References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combining-lambda-expressions">Combining Lambda Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comparators">Comparators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="002010-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B010%E6%B3%A8%E8%A7%A3.html">【官方】Java官方笔记10注解</a></li>
<li class="toctree-l2"><a class="reference internal" href="002011-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B011%E5%8C%85.html">【官方】Java官方笔记11包</a></li>
<li class="toctree-l2"><a class="reference internal" href="002012-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B012%E5%BC%82%E5%B8%B8.html">【官方】Java官方笔记12异常</a></li>
<li class="toctree-l2"><a class="reference internal" href="002013-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B013%E9%9B%86%E5%90%88.html">【官方】Java官方笔记13集合</a></li>
<li class="toctree-l2"><a class="reference internal" href="002014-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B014%E6%B5%81.html">【官方】Java官方笔记14流</a></li>
<li class="toctree-l2"><a class="reference internal" href="002015-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91%E4%BA%8C%E5%88%B7Java%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B.html">【官方】二刷Java官方教程</a></li>
<li class="toctree-l2"><a class="reference internal" href="003001-%E3%80%90%E5%BA%93%E3%80%91fastjson%E7%9F%A5%E5%A4%9A%E5%B0%91.html">【库】fastjson知多少</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">设计模式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.html">测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6.html">测试框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html">性能测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83.html">测试环境</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html">单元测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95.html">白盒测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95.html">接口测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%95%8C%E9%9D%A2%E6%B5%8B%E8%AF%95.html">界面测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A.html">测试报告</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6.html">开发框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html">消息队列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%AE%97%E6%B3%95%E6%8C%91%E6%88%98.html">算法挑战</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%8A%80%E6%9C%AF%E7%9F%A5%E8%AF%86.html">技术知识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%9B%B4%E5%A4%9A%E8%AF%AD%E8%A8%80.html">更多语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%8E%86%E5%8F%B2%E6%9D%82%E6%96%87.html">历史杂文</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html">读书笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E5%B0%8A%E4%BA%AB%E6%9C%8D%E5%8A%A1.html">尊享服务</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">测试开发体系</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.html">编程语言</a> &raquo;</li>
        
      <li>【官方】Java官方笔记9Lambda表达式</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/编程语言/002009-【官方】Java官方笔记9Lambda表达式.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="java9lambda">
<h1>【官方】Java官方笔记9Lambda表达式<a class="headerlink" href="#java9lambda" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang15.png" /></p>
<div class="section" id="lambda-expression">
<h2>Lambda Expression<a class="headerlink" href="#lambda-expression" title="Permalink to this headline">¶</a></h2>
<p>有了Lambda Expression，就不用再写anonymous classes。</p>
<p>写Lambda，首先要找到它的类型。</p>
<p>There is a restriction on the type of a lambda expression: it has to be
a functional interface.</p>
<p>函数接口，只有1个抽象方法的接口：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Runnable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">run</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>默认方法do not count，所以下面这个也是函数接口：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kt">void</span> <span class="nf">accept</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">);</span>

    <span class="k">default</span> <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">andThen</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">after</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>静态方法也do not count，所以下面这个还是函数接口：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kt">boolean</span> <span class="nf">test</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">);</span>

    <span class="k">default</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">and</span><span class="p">(</span><span class="n">Predicate</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>

    <span class="k">default</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">negate</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>

    <span class="k">default</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">or</span><span class="p">(</span><span class="n">Predicate</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">isEqual</span><span class="p">(</span><span class="n">Object</span> <span class="n">targetRef</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">not</span><span class="p">(</span><span class="n">Predicate</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// the body of this method has been removed</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>接着，实现函数接口的抽象方法，比如Predicate的抽象方法：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">boolean</span> <span class="nf">test</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">);</span>
</pre></div>
</div>
<p>实现<code class="docutils literal notranslate"><span class="pre">Predicate&lt;String&gt;</span></code>：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span>
    <span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>省略了返回类型和方法名，只保留参数列表和方法体，用<code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>连接。</p>
<p>再简化：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
<p>这就是最常见的Lambda，因为前面有String，编译器能够知道，所以这里把<code class="docutils literal notranslate"><span class="pre">(String</span> <span class="pre">s)</span></code>简写为<code class="docutils literal notranslate"><span class="pre">s</span></code>，然后只有一行，再把大括号和return省略掉。</p>
<p>无return，跟省略掉return：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">print</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p>无参数，用<code class="docutils literal notranslate"><span class="pre">()</span></code>代替：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Runnable</span> <span class="n">runnable</span> <span class="o">=</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;I am running&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Lambda的使用：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">retainStringsOfLength3</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stringsOfLength3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">:</span> <span class="n">strings</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">predicate</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">stringsOfLength3</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">stringsOfLength3</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>因为Lambda实现了接口的抽象方法，所以<code class="docutils literal notranslate"><span class="pre">predicate.test(s)</span></code>调用的实际上是Lambda。</p>
<p>Lambda不能修改变量值：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">calculateTotalPrice</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span> <span class="n">products</span><span class="p">)</span> <span class="p">{</span>

    <span class="kt">int</span> <span class="n">totalPrice</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span> <span class="n">consumer</span> <span class="o">=</span>
        <span class="n">product</span> <span class="o">-&gt;</span> <span class="n">totalPrice</span> <span class="o">+=</span> <span class="n">product</span><span class="p">.</span><span class="na">getPrice</span><span class="p">();</span>  <span class="c1">// 编译错误</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">Product</span> <span class="n">product</span><span class="p">:</span> <span class="n">products</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">consumer</span><span class="p">.</span><span class="na">accept</span><span class="p">(</span><span class="n">product</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>编译错误：Variable used in lambda expression should be final or
effectively final</p>
<p>This process of accessing variable is called <em>capturing</em>: lambdas
cannot <em>capture</em> variables, they can only <em>capture</em> values. A final
variable is in fact a value.</p>
<p>也就是Lambda只能读，不能写。</p>
</div>
<div class="section" id="lambda">
<h2>使用Lambda<a class="headerlink" href="#lambda" title="Permalink to this headline">¶</a></h2>
<p>Lambda是JDK8跨时代的语法技术，它引领了大量的JDK API重写。</p>
<p>java.util.function中包含了很多可供实现的函数接口，functional
interfaces：</p>
<p><a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/package-summary.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/package-summary.html</a></p>
<p>比如：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Supplier</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="n">T</span> <span class="nf">get</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lambda实现：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Supplier&lt;String&gt; supplier = () -&gt; &quot;Hello Duke!&quot;;`
</pre></div>
</div>
<p>使用：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="p">(</span><span class="mi">314L</span><span class="p">);</span>
<span class="n">Supplier</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">newRandom</span> <span class="o">=</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">random</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">newRandom</span><span class="p">.</span><span class="na">get</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>比如：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// really any list of any kind of objects</span>
<span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">printer</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<span class="n">strings</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">printer</span><span class="p">);</span>
</pre></div>
</div>
<p>比如：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">immutableStrings</span> <span class="o">=</span>
        <span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">,</span> <span class="s">&quot;five&quot;</span><span class="p">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">immutableStrings</span><span class="p">);</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">isOddLength</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">strings</span><span class="p">.</span><span class="na">removeIf</span><span class="p">(</span><span class="n">isOddLength</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;strings = &quot;</span> <span class="o">+</span> <span class="n">strings</span><span class="p">);</span>
</pre></div>
</div>
<p>比如：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">R</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="n">R</span> <span class="nf">apply</span><span class="p">(</span><span class="n">U</span> <span class="n">u</span><span class="p">);</span>

    <span class="c1">// default and static methods removed</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">toLength</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">();</span>
<span class="n">String</span> <span class="n">word</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// any kind of word will do</span>
<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">toLength</span><span class="p">.</span><span class="na">apply</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
</pre></div>
</div>
<p>以上是JDK中最经典的<strong>4种function interface</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Supplier&lt;T&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Consumer&lt;T&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Predicate&lt;T&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Function&lt;T,</span> <span class="pre">R&gt;</span></code></p></li>
</ul>
<p><strong>总结一下，Lambda的使用就是先实现function interface的abstract
method，然后①接口实例调用abstract
method，或者②接口实例被forEach等调用。</strong></p>
<blockquote>
<div><p>Lambda使得function
interface能够实例化：<code class="docutils literal notranslate"><span class="pre">Predicate&lt;String&gt;</span> <span class="pre">isOddLength</span> <span class="pre">=</span> <span class="pre">s</span> <span class="pre">-&gt;</span> <span class="pre">s.length()</span> <span class="pre">%</span> <span class="pre">2</span> <span class="pre">==</span> <span class="pre">0;</span></code></p>
</div></blockquote>
<p>The
<code class="docutils literal notranslate"><span class="pre">`java.util.function</span></code> &lt;<a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/package-summary.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/package-summary.html</a>&gt;`__
package is now central in Java, because all the lambda expressions you
are going to use in the Collections Framework or the Stream API
implement one of the interfaces from that package.</p>
<p>发现没有，把：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// really any list of any kind of objects</span>
<span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">printer</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<span class="n">strings</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">printer</span><span class="p">);</span>
</pre></div>
</div>
<p>简写一下，去掉中间的接口实例：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// really any list of any kind of objects</span>
<span class="n">strings</span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
</pre></div>
</div>
<p>这不就是常见到的Lambda的形态嘛。换句话说，<strong>Lambda的结果就是函数接口实例（Function
interface
instance）</strong>，使用Lambda本质上就是调用函数，Java中没有函数的概念，通过function
interface的abstract method，引入了函数，从而造就了Lambda。</p>
</div>
<div class="section" id="method-references">
<h2>Method References<a class="headerlink" href="#method-references" title="Permalink to this headline">¶</a></h2>
<p>Sometimes people call these lambda expressions “anonymous methods”,
since it is just that: a method that has no name, and that you can move
around your application, store in a field or a variable, pass as an
argument to a method or a constructor and return from a method.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">printer</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p>这里的Lambda没有什么逻辑，其实就是System.out.println()方法的引用，所以可以简写为Bound（System.out优化前后一致）：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">printer</span> <span class="o">=</span> <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">;</span>
</pre></div>
</div>
<p>Static：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">IntBinaryOperator</span> <span class="n">max</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Integer</span><span class="p">.</span><span class="na">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">IntBinaryOperator</span> <span class="n">max</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">::</span><span class="n">max</span><span class="p">;</span>
</pre></div>
</div>
<p>Unbound（优化前s，优化后String；优化前user，优化后User）：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">toLength</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">toLength</span> <span class="o">=</span> <span class="n">String</span><span class="p">::</span><span class="n">length</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Function</span><span class="o">&lt;</span><span class="n">User</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">getName</span> <span class="o">=</span> <span class="n">user</span> <span class="o">-&gt;</span> <span class="n">user</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Function</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">toLength</span> <span class="o">=</span> <span class="n">User</span><span class="p">::</span><span class="n">getName</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">indexOf</span> <span class="o">=</span> <span class="p">(</span><span class="n">sentence</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sentence</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">indexOf</span> <span class="o">=</span> <span class="n">String</span><span class="p">::</span><span class="n">indexOf</span><span class="p">;</span>
</pre></div>
</div>
<p>Constructor：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">newListOfStrings</span> <span class="o">=</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">newListOfStrings</span> <span class="o">=</span> <span class="n">ArrayList</span><span class="p">::</span><span class="k">new</span><span class="p">;</span>
</pre></div>
</div>
<p>总结：</p>
<p><img alt="image2" src="../_images/2023-06-17-11-27-53-image.png" /></p>
</div>
<div class="section" id="combining-lambda-expressions">
<h2>Combining Lambda Expressions<a class="headerlink" href="#combining-lambda-expressions" title="Permalink to this headline">¶</a></h2>
<p>Function interface中的defualt method该登场了。</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">nonNull</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">nonEmpty</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">();</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">shorterThan5</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">nonNull</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">nonEmpty</span><span class="p">).</span><span class="na">and</span><span class="p">(</span><span class="n">shorterThan5</span><span class="p">);</span>
</pre></div>
</div>
<p>这里的<code class="docutils literal notranslate"><span class="pre">and()</span></code>就是default
method，它实现了Lambda的组合，也就是链式调用的既视感。</p>
<p>稍复杂点的：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">isNull</span> <span class="o">=</span> <span class="n">Objects</span><span class="p">::</span><span class="n">isNull</span><span class="p">;</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">isEmpty</span> <span class="o">=</span> <span class="n">String</span><span class="p">::</span><span class="n">isEmpty</span><span class="p">;</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">isNullOrEmpty</span> <span class="o">=</span> <span class="n">isNull</span><span class="p">.</span><span class="na">or</span><span class="p">(</span><span class="n">isEmpty</span><span class="p">);</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">isNotNullNorEmpty</span> <span class="o">=</span> <span class="n">isNullOrEmpty</span><span class="p">.</span><span class="na">negate</span><span class="p">();</span>
<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">shorterThan5</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">Predicate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">isNotNullNorEmpty</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shorterThan5</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="comparators">
<h2>Comparators<a class="headerlink" href="#comparators" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="n">T</span> <span class="n">o1</span><span class="p">,</span> <span class="n">T</span> <span class="n">o2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lambda实现：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">comparator</span> <span class="o">=</span> <span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Integer</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">comparator</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">::</span><span class="n">compare</span><span class="p">;</span>
</pre></div>
</div>
<p>Comparator的静态方法：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">comparator</span> <span class="o">=</span> <span class="n">Comparator</span><span class="p">.</span><span class="na">comparing</span><span class="p">(</span><span class="n">String</span><span class="p">::</span><span class="n">length</span><span class="p">);</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">`comparing()</span></code> &lt;<a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)</a>&gt;`__ method
is a static method of
the <code class="docutils literal notranslate"><span class="pre">`Comparator</span></code> &lt;<a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Comparator.html</a>&gt;`__ interface.
It takes
a <code class="docutils literal notranslate"><span class="pre">`Function</span></code> &lt;<a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/Function.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/Function.html</a>&gt;`__ as
an argument, that should return a type that is an extension
of <code class="docutils literal notranslate"><span class="pre">`Comparable</span></code> &lt;<a class="reference external" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html</a>&gt;`__.</p>
<p>使用：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// this is your list</span>
<span class="n">Comparator</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">byName</span> <span class="o">=</span> <span class="n">Comparator</span><span class="p">.</span><span class="na">comparing</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getName</span><span class="p">);</span>
<span class="n">users</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">byName</span><span class="p">);</span>
</pre></div>
</div>
<p>还有默认方法thenComparing：</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">byFirstNameThenLastName</span> <span class="o">=</span>
        <span class="n">Comparator</span><span class="p">.</span><span class="na">comparing</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getFirstName</span><span class="p">)</span>
                  <span class="p">.</span><span class="na">thenComparing</span><span class="p">(</span><span class="n">User</span><span class="p">::</span><span class="n">getLastName</span><span class="p">);</span>
</pre></div>
</div>
<blockquote>
<div><p>参考资料：</p>
<p>Lambda Expressions <a class="reference external" href="https://dev.java/learn/lambdas/">https://dev.java/learn/lambdas/</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="002010-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B010%E6%B3%A8%E8%A7%A3.html" class="btn btn-neutral float-right" title="【官方】Java官方笔记10注解" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="002008-%E3%80%90%E5%AE%98%E6%96%B9%E3%80%91Java%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E6%B3%9B%E5%9E%8B.html" class="btn btn-neutral float-left" title="【官方】Java官方笔记8泛型" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 测试开发体系

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>