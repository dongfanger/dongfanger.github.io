

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>【Spring】对IoC容器和Bean的学习笔记 &mdash; 测试开发体系 latest documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/readmore.js"></script>
        <script src="../_static/js/baidutongji.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="【Maven】跟着官方文档学Maven构建生命周期" href="001001-%E3%80%90Maven%E3%80%91%E8%B7%9F%E7%9D%80%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AD%A6Maven%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" />
    <link rel="prev" title="【Spring】SpringBoot官方笔记8其他" href="000011-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E5%85%B6%E4%BB%96.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 测试开发体系
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../%E5%85%B3%E4%BA%8E%E6%9C%AC%E4%B9%A6.html">关于本书</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.html">编程语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91.html">后端开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">设计模式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7.html">测试工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6.html">测试框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html">性能测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83.html">测试环境</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html">单元测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95.html">白盒测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95.html">接口测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%95%8C%E9%9D%A2%E6%B5%8B%E8%AF%95.html">界面测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A.html">测试报告</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../chapters/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6.html">开发框架</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="000001-%E3%80%90Spring%E3%80%91SpringBoot%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%89%E8%A3%85.html">【Spring】SpringBoot简介与安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="000002-%E3%80%90Spring%E3%80%91%E5%BC%80%E5%8F%91%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AASpringBoot%E5%BA%94%E7%94%A8.html">【Spring】开发你的第一个SpringBoot应用</a></li>
<li class="toctree-l2"><a class="reference internal" href="000003-%E3%80%90Spring%E3%80%91%E5%85%B3%E4%BA%8ESpringBoot%E5%BC%80%E5%8F%91%E7%9A%84%E6%9B%B4%E5%A4%9A%E7%BB%86%E8%8A%82.html">【Spring】关于SpringBoot开发的更多细节</a></li>
<li class="toctree-l2"><a class="reference internal" href="000004-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B01%E5%85%A5%E9%97%A8.html">【Spring】SpringBoot官方笔记1入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="000005-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B02%E4%BD%BF%E7%94%A8.html">【Spring】SpringBoot官方笔记2使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="000006-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B03%E6%A0%B8%E5%BF%83.html">【Spring】SpringBoot官方笔记3核心</a></li>
<li class="toctree-l2"><a class="reference internal" href="000007-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B04Web.html">【Spring】SpringBoot官方笔记4Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="000008-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B05Data.html">【Spring】SpringBoot官方笔记5Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="000009-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B06%E6%B6%88%E6%81%AF.html">【Spring】SpringBoot官方笔记6消息</a></li>
<li class="toctree-l2"><a class="reference internal" href="000010-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B07IO.html">【Spring】SpringBoot官方笔记7IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="000011-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E5%85%B6%E4%BB%96.html">【Spring】SpringBoot官方笔记8其他</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">【Spring】对IoC容器和Bean的学习笔记</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-we-mean-by-spring">What We Mean by “Spring”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#container-overview">Container Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bean-overview">Bean Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="001001-%E3%80%90Maven%E3%80%91%E8%B7%9F%E7%9D%80%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AD%A6Maven%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html">【Maven】跟着官方文档学Maven构建生命周期</a></li>
<li class="toctree-l2"><a class="reference internal" href="002001-%E3%80%90Mybatis%E3%80%91Java%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6Mybatis%E5%85%A5%E9%97%A8.html">【Mybatis】Java持久层框架Mybatis入门</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html">消息队列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E7%AE%97%E6%B3%95%E6%8C%91%E6%88%98.html">算法挑战</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%8A%80%E6%9C%AF%E7%9F%A5%E8%AF%86.html">技术知识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E6%9B%B4%E5%A4%9A%E8%AF%AD%E8%A8%80.html">更多语言</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E5%8E%86%E5%8F%B2%E6%9D%82%E6%96%87.html">历史杂文</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html">读书笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E5%B0%8A%E4%BA%AB%E6%9C%8D%E5%8A%A1.html">尊享服务</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">测试开发体系</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../chapters/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6.html">开发框架</a> &raquo;</li>
        
      <li>【Spring】对IoC容器和Bean的学习笔记</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/开发框架/000014-【Spring】对IoC容器和Bean的学习笔记.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="springiocbean">
<h1>【Spring】对IoC容器和Bean的学习笔记<a class="headerlink" href="#springiocbean" title="Permalink to this headline">¶</a></h1>
<p><img alt="image1" src="../_images/wanggang3.png" /></p>
<div class="section" id="what-we-mean-by-spring">
<h2>What We Mean by “Spring”<a class="headerlink" href="#what-we-mean-by-spring" title="Permalink to this headline">¶</a></h2>
<p>The term “Spring” means different things in different contexts. It can
be used to refer to the Spring Framework project itself, which is where
it all started. Over time, other Spring projects have been built on top
of the Spring Framework. Most often, when people say “Spring”, they mean
the entire family of projects. This reference documentation focuses on
the foundation: the Spring Framework itself.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>IoC，the Inversion of Control. IoC is also known as dependency injection
(DI). （依赖注入实现了控制反转，为此Spring设计了The IoC
Container这项技术）</p>
<p>It is a process whereby objects define their dependencies (that is, the
other objects they work with) only through constructor arguments,
arguments to a factory method, or properties that are set on the object
instance after it is constructed or returned from a factory method.
<strong>The container then injects those dependencies when it creates the
bean.</strong> This process is fundamentally the inverse (hence the name,
Inversion of Control) of the bean itself controlling the instantiation
or location of its dependencies by using direct construction of classes
or a mechanism such as the Service Locator pattern.</p>
<blockquote>
<div><p>这段描述是关于“依赖注入”（Dependency
Injection，DI）的解释。依赖注入是软件工程中的一种设计模式，它通过构造函数参数、工厂方法的参数或者在对象实例构造或从工厂方法返回后设置的属性来定义对象的依赖关系。容器在创建对象时注入这些依赖。这个过程本质上是对象本身通过直接构造类或使用服务定位器模式等机制来控制其依赖项的实例化或定位的反转（因此得名“控制反转”）。</p>
<p>传统上，对象可能会直接实例化或定位其所依赖的对象，导致紧耦合，并且难以修改或测试单个组件。<strong>依赖注入通过将依赖管理的责任从对象本身移交给外部容器或框架来解决这个问题。</strong></p>
<p>应用依赖注入，对象可以更具可重用性和可维护性，因为它们只关注履行自己的职责，而依赖关系从外部进行注入。这样可以更好地分离关注点，并且可以更容易地修改依赖关系，而无需修改依赖对象。</p>
<p>通过依赖注入实现的控制反转还有助于测试，因为在单元测试期间，可以轻松地使用模拟对象替代依赖项，实现对各个组件的隔离测试。</p>
<p>总体而言，依赖注入是一种强大的技术，通过将依赖的创建和管理从依赖对象本身解耦，促进模块化、松耦合和可测试的软件设计。</p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">org.springframework.beans</span></code> and <code class="docutils literal notranslate"><span class="pre">org.springframework.context</span></code> packages
are the basis for Spring Framework’s IoC container.</p>
<p>In Spring, the objects that form the backbone of your application and
that are managed by the Spring IoC container are called beans. <strong>A bean
is an object that is instantiated, assembled, and managed by a Spring
IoC container.</strong> Otherwise, a bean is simply one of many objects in your
application. Beans, and the dependencies among them, are reflected in
the configuration <strong>metadata</strong> used by a container.</p>
</div>
<div class="section" id="container-overview">
<h2>Container Overview<a class="headerlink" href="#container-overview" title="Permalink to this headline">¶</a></h2>
<p><strong>The ``org.springframework.context.ApplicationContext`` interface
represents the Spring IoC container</strong> and is responsible for
instantiating, configuring, and assembling the beans.</p>
<p>In stand-alone applications, it is common to create an instance
of <code class="docutils literal notranslate"><span class="pre">`ClassPathXmlApplicationContext</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html</a>&gt;`__ or <code class="docutils literal notranslate"><span class="pre">`FileSystemXmlApplicationContext</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html</a>&gt;`__.</p>
<p><img alt="image2" src="../_images/2023-07-20-19-08-30-image.png" /></p>
<p><strong>Configuration Metadata</strong></p>
<p>The configuration metadata is represented in <strong>XML, Java annotations, or
Java code</strong>. This configuration metadata represents how you, as an
application developer, tell the Spring container to instantiate,
configure, and assemble the objects in your application.</p>
<p>XML-based metadata is not the only allowed form of configuration
metadata. Other forms of metadata with the Spring container, see:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.spring.io/spring-framework/reference/core/beans/annotation-config.html">Annotation-based
configuration</a>:
define beans using annotation-based configuration metadata.</p></li>
<li><p><a class="reference external" href="https://docs.spring.io/spring-framework/reference/core/beans/java.html">Java-based
configuration</a>:
define beans external to your application classes by using Java
rather than XML files. To use these features, see
the<code class="docutils literal notranslate"><span class="pre">`&#64;Configuration</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Configuration.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Configuration.html</a>&gt;`__, <code class="docutils literal notranslate"><span class="pre">`&#64;Bean</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Bean.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Bean.html</a>&gt;`__, <code class="docutils literal notranslate"><span class="pre">`&#64;Import</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Import.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/Import.html</a>&gt;`__,
and <code class="docutils literal notranslate"><span class="pre">`&#64;DependsOn</span></code> &lt;<a class="reference external" href="https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/DependsOn.html">https://docs.spring.io/spring-framework/docs/6.0.11/javadoc-api/org/springframework/context/annotation/DependsOn.html</a>&gt;`__ annotations.</p></li>
</ul>
<p>XML-based configuration metadata configures these beans
as <code class="docutils literal notranslate"><span class="pre">&lt;bean/&gt;</span></code> elements inside a top-level <code class="docutils literal notranslate"><span class="pre">&lt;beans/&gt;</span></code> element. Java
configuration typically uses <code class="docutils literal notranslate"><span class="pre">&#64;Bean</span></code>-annotated methods within
a <code class="docutils literal notranslate"><span class="pre">&#64;Configuration</span></code> class.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;...&quot;</span> <span class="na">class=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;...&quot;</span> <span class="na">class=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="c">&lt;!-- more bean definitions go here --&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<p><strong>Instantiating a Container</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;services.xml&quot;</span><span class="p">,</span> <span class="s">&quot;daos.xml&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">services.xml</span></code></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- services --&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;petStore&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.samples.jpetstore.services.PetStoreServiceImpl&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;accountDao&quot;</span> <span class="na">ref=</span><span class="s">&quot;accountDao&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;itemDao&quot;</span> <span class="na">ref=</span><span class="s">&quot;itemDao&quot;</span><span class="nt">/&gt;</span>
        <span class="c">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="c">&lt;!-- more bean definitions for services go here --&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">property</span> <span class="pre">name</span></code> element refers to the name of the JavaBean
property, and the <code class="docutils literal notranslate"><span class="pre">ref</span></code> element refers to the name of another bean
definition.</p>
<p>This linkage between <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">ref</span></code> elements expresses the
dependency between collaborating objects.</p>
<p><code class="docutils literal notranslate"><span class="pre">daos.xml</span></code></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;accountDao&quot;</span>
        <span class="na">class=</span><span class="s">&quot;org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;itemDao&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.samples.jpetstore.dao.jpa.JpaItemDao&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="c">&lt;!-- more bean definitions for data access objects go here --&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<p><strong>Composing XML-based Configuration Metadata</strong></p>
<p>Often, each individual XML configuration file represents a logical layer
or module in your architecture.</p>
<p>Use one or more occurrences of the <code class="docutils literal notranslate"><span class="pre">&lt;import/&gt;</span></code> element to load bean
definitions from another file or files. The following example shows how
to do so:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;beans&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;services.xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;resources/messageSource.xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;/resources/themeSource.xml&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;bean1&quot;</span> <span class="na">class=</span><span class="s">&quot;...&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;bean2&quot;</span> <span class="na">class=</span><span class="s">&quot;...&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<p><strong>The Groovy Bean Definition DSL</strong></p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">beans</span> <span class="o">{</span>
    <span class="n">dataSource</span><span class="o">(</span><span class="n">BasicDataSource</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">driverClassName</span> <span class="o">=</span> <span class="s2">&quot;org.hsqldb.jdbcDriver&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;jdbc:hsqldb:mem:grailsDB&quot;</span>
        <span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;sa&quot;</span>
        <span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="o">[</span><span class="nl">mynew:</span><span class="s2">&quot;setting&quot;</span><span class="o">]</span>
    <span class="o">}</span>
    <span class="n">sessionFactory</span><span class="o">(</span><span class="n">SessionFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">dataSource</span> <span class="o">=</span> <span class="n">dataSource</span>
    <span class="o">}</span>
    <span class="n">myService</span><span class="o">(</span><span class="n">MyService</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">nestedBean</span> <span class="o">=</span> <span class="o">{</span> <span class="n">AnotherBean</span> <span class="n">bean</span> <span class="o">-&gt;</span>
            <span class="n">dataSource</span> <span class="o">=</span> <span class="n">dataSource</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Using the Container</strong></p>
<p>By using the method <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">getBean(String</span> <span class="pre">name,</span> <span class="pre">Class&lt;T&gt;</span> <span class="pre">requiredType)</span></code>,
you can retrieve instances of your beans.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// create and configure beans</span>
<span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;services.xml&quot;</span><span class="p">,</span> <span class="s">&quot;daos.xml&quot;</span><span class="p">);</span>

<span class="c1">// retrieve configured instance</span>
<span class="n">PetStoreService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;petStore&quot;</span><span class="p">,</span> <span class="n">PetStoreService</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="c1">// use configured instance</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">userList</span> <span class="o">=</span> <span class="n">service</span><span class="p">.</span><span class="na">getUsernameList</span><span class="p">();</span>
</pre></div>
</div>
<p>Indeed, your application code should have no calls to
the <code class="docutils literal notranslate"><span class="pre">getBean()</span></code> method at all and thus have no dependency on Spring
APIs at all. For example, Spring’s integration with web frameworks
provides dependency injection for various web framework components such
as <strong>controllers and JSF-managed beans</strong>, letting you declare a
dependency on a specific bean through metadata (such as an autowiring
annotation).</p>
</div>
<div class="section" id="bean-overview">
<h2>Bean Overview<a class="headerlink" href="#bean-overview" title="Permalink to this headline">¶</a></h2>
<p>Beans are created with the configuration metadata that you supply to the
container (for example, in the form of XML <code class="docutils literal notranslate"><span class="pre">&lt;bean/&gt;</span></code> definitions).</p>
<blockquote>
<div><p>Class只是Class，但是如果配置到了XML的<code class="docutils literal notranslate"><span class="pre">&lt;bean/&gt;</span></code>，那么它就成为了the
Spring Bean。</p>
</div></blockquote>
<p>BeanDefinition：</p>
<ul class="simple">
<li><p>A package-qualified class name: typically, the actual implementation
class of the bean being defined.</p></li>
<li><p>Bean behavioral configuration elements, which state how the bean
should behave in the container (scope, lifecycle callbacks, and so
forth).</p></li>
<li><p>References to other beans that are needed for the bean to do its
work. These references are also called collaborators or dependencies.</p></li>
<li><p>Other configuration settings to set in the newly created object — for
example, the size limit of the pool or the number of connections to
use in a bean that manages a connection pool.</p></li>
</ul>
<p><strong>Naming Beans</strong></p>
<p>In XML-based configuration metadata, you use the <code class="docutils literal notranslate"><span class="pre">id</span></code> attribute, the
<code class="docutils literal notranslate"><span class="pre">name</span></code> attribute, or both to specify bean identifiers.</p>
<p><strong>Aliasing a Bean outside the Bean Definition</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;alias</span> <span class="na">name=</span><span class="s">&quot;fromName&quot;</span> <span class="na">alias=</span><span class="s">&quot;toName&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Instantiating Beans</strong></p>
<p>If you use XML-based configuration metadata, you specify the type (or
class) of object that is to be instantiated in the <code class="docutils literal notranslate"><span class="pre">class</span></code> attribute
of the <code class="docutils literal notranslate"><span class="pre">&lt;bean/&gt;</span></code> element.</p>
<p><strong>Instantiation with a Constructor</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;exampleBean&quot;</span> <span class="na">class=</span><span class="s">&quot;examples.ExampleBean&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">name=</span><span class="s">&quot;anotherExample&quot;</span> <span class="na">class=</span><span class="s">&quot;examples.ExampleBeanTwo&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p><strong>Instantiation with a Static Factory Method</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;clientService&quot;</span>
    <span class="na">class=</span><span class="s">&quot;examples.ClientService&quot;</span>
    <span class="na">factory-method=</span><span class="s">&quot;createInstance&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClientService</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">ClientService</span> <span class="n">clientService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientService</span><span class="p">();</span>
    <span class="kd">private</span> <span class="nf">ClientService</span><span class="p">()</span> <span class="p">{}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ClientService</span> <span class="nf">createInstance</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">clientService</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Instantiation by Using an Instance Factory Method</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- the factory bean, which contains a method called createInstance() --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;serviceLocator&quot;</span> <span class="na">class=</span><span class="s">&quot;examples.DefaultServiceLocator&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- inject any dependencies required by this locator bean --&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="c">&lt;!-- the bean to be created via the factory bean --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;clientService&quot;</span>
    <span class="na">factory-bean=</span><span class="s">&quot;serviceLocator&quot;</span>
    <span class="na">factory-method=</span><span class="s">&quot;createClientServiceInstance&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultServiceLocator</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">ClientService</span> <span class="n">clientService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientServiceImpl</span><span class="p">();</span>

    <span class="kd">public</span> <span class="n">ClientService</span> <span class="nf">createClientServiceInstance</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">clientService</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In Spring documentation, “factory bean” refers to a bean that is
configured in the Spring container and that creates objects through an
<a class="reference external" href="https://docs.spring.io/spring-framework/reference/core/beans/definition.html#beans-factory-class-instance-factory-method">instance</a>
or
<a class="reference external" href="https://docs.spring.io/spring-framework/reference/core/beans/definition.html#beans-factory-class-static-factory-method">static</a>
factory method.</p>
<p><strong>Determining a Bean’s Runtime Type</strong></p>
<p>The recommended way to find out about the actual runtime type of a
particular bean is a <code class="docutils literal notranslate"><span class="pre">BeanFactory.getType</span></code> call for the specified bean
name.</p>
<blockquote>
<div><p>参考资料：</p>
<p>The IoC Container
<a class="reference external" href="https://docs.spring.io/spring-framework/reference/core/beans.html">https://docs.spring.io/spring-framework/reference/core/beans.html</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="001001-%E3%80%90Maven%E3%80%91%E8%B7%9F%E7%9D%80%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AD%A6Maven%E6%9E%84%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" class="btn btn-neutral float-right" title="【Maven】跟着官方文档学Maven构建生命周期" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="000011-%E3%80%90Spring%E3%80%91SpringBoot%E5%AE%98%E6%96%B9%E7%AC%94%E8%AE%B08%E5%85%B6%E4%BB%96.html" class="btn btn-neutral float-left" title="【Spring】SpringBoot官方笔记8其他" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 测试开发体系

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>